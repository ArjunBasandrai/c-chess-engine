#include "board_constants.h"

#ifndef U64
#define U64 unsigned long long
#endif

char ascii_pieces[12] = "PNBRQKpnbrqk";
char *unicode_pieces[12] = {"♙", "♘", "♗", "♖", "♕", "♔", "♟︎", "♞", "♝", "♜", "♛", "♚"};
int char_pieces[] = {
    ['P'] = P,
    ['N'] = N,
    ['B'] = B,
    ['R'] = R,
    ['Q'] = Q,
    ['K'] = K,
    ['p'] = p,
    ['n'] = n,
    ['b'] = b,
    ['r'] = r,
    ['q'] = q,
    ['k'] = k
};

char files[8] = {
    'a',
    'b',
    'c',
    'd',
    'e',
    'f',
    'g',
    'h'
};

const char *square_to_coordinate[] = {
    "a8", "b8", "c8", "d8", "e8", "f8", "g8", "h8",
    "a7", "b7", "c7", "d7", "e7", "f7", "g7", "h7",
    "a6", "b6", "c6", "d6", "e6", "f6", "g6", "h6",
    "a5", "b5", "c5", "d5", "e5", "f5", "g5", "h5",
    "a4", "b4", "c4", "d4", "e4", "f4", "g4", "h4",
    "a3", "b3", "c3", "d3", "e3", "f3", "g3", "h3",
    "a2", "b2", "c2", "d2", "e2", "f2", "g2", "h2",
    "a1", "b1", "c1", "d1", "e1", "f1", "g1", "h1"
};

const U64 not_a_file = 18374403900871474942ULL;
const U64 not_h_file = 9187201950435737471ULL;
const U64 not_hg_file = 4557430888798830399ULL;
const U64 not_ab_file = 18229723555195321596ULL;

const int bishop_relevant_bits[64] = {
    6, 5, 5, 5, 5, 5, 5, 6, 
    5, 5, 5, 5, 5, 5, 5, 5, 
    5, 5, 7, 7, 7, 7, 5, 5, 
    5, 5, 7, 9, 9, 7, 5, 5, 
    5, 5, 7, 9, 9, 7, 5, 5, 
    5, 5, 7, 7, 7, 7, 5, 5, 
    5, 5, 5, 5, 5, 5, 5, 5, 
    6, 5, 5, 5, 5, 5, 5, 6
};

const int rook_relevant_bits[64] = {
    12, 11, 11, 11, 11, 11, 11, 12, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    11, 10, 10, 10, 10, 10, 10, 11, 
    12, 11, 11, 11, 11, 11, 11, 12
};

const int castling_rights[64] = {
     7, 15, 15, 15,  3, 15, 15, 11,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    15, 15, 15, 15, 15, 15, 15, 15,
    13, 15, 15, 15, 12, 15, 15, 14
};

const int material_score[2][12] =
{
    82, 337, 365, 477, 1025, 12000, -82, -337, -365, -477, -1025, -12000,
    
    94, 281, 297, 512,  936, 12000, -94, -281, -297, -512,  -936, -12000
};

const int opening_phase_score = 6192;
const int endgame_phase_score = 518;

int positional_score[2][6][64] = {
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 
            94, 130, 57, 91, 64, 122, 30, -11, 
            -6, 3, 22, 27, 61, 56, 21, -20, 
            -10, 9, 2, 17, 23, 8, 13, -23, 
            -27, -2, -5, 8, 13, 6, 6, -25, 
            -26, -4, -4, -10, 0, 0, 29, -12, 
            -31, 0, -16, -19, -11, 24, 38, -18, 
            0, 0, 0, 0, 0, 0, 0, 0, 
            },
        {-163, -88, -30, -45, 57, -93, -11, -103, 
            -69, -37, 72, 32, 23, 62, 3, -13, 
            -43, 56, 37, 61, 84, 125, 73, 40, 
            -5, 17, 16, 53, 33, 65, 14, 22, 
            -13, 0, 16, 13, 28, 19, 17, -8, 
            -19, -5, 12, 10, 19, 17, 25, -16, 
            -25, -49, -8, 0, 0, 14, -10, -15, 
            -101, -21, -54, -29, -17, -24, -19, -23, 
            },
        {-25, 0, -78, -33, -21, -38, 7, -4, 
            -22, 12, -18, -9, 26, 59, 14, -43, 
            -12, 33, 43, 36, 35, 46, 37, 0, 
            -4, 1, 15, 46, 33, 33, 3, 0, 
            -2, 9, 9, 22, 30, 8, 6, 0, 
            0, 15, 11, 11, 10, 23, 14, 10, 
            0, 15, 12, 0, 3, 17, 33, 1, 
            -29, -3, -10, -17, -9, -12, -35, -17, 
            },
        {32, 42, 32, 47, 63, 9, 31, 39, 
            23, 28, 54, 58, 76, 67, 26, 44, 
            -1, 18, 26, 32, 17, 45, 61, 16, 
            -20, -7, 7, 26, 20, 35, -4, -16, 
            -32, -26, -12, 0, 9, -3, 2, -23, 
            -45, -25, -16, -13, 3, 0, -1, -29, 
            -44, -16, -20, -9, -1, 7, -2, -71, 
            -15, -13, 0, 13, 16, 7, -37, -26, 
            },
        {-24, 0, 29, 12, 59, 44, 43, 45, 
            -20, -35, -5, 0, -16, 57, 28, 54, 
            -9, -13, 7, 8, 29, 56, 47, 57, 
            -23, -23, -16, -12, 0, 13, -2, 1, 
            -9, -22, -9, -6, 0, 0, 3, 0, 
            -14, 2, -11, 0, -1, 2, 14, 1, 
            -31, -4, 7, 2, 8, 11, 0, 0, 
            -1, -14, -9, 6, -11, -25, -31, -46, 
            },
        {-61, 19, 16, -15, -52, -30, 1, 9, 
            25, -1, -20, -7, -8, -4, -38, -29, 
            -9, 20, 0, -16, -20, 2, 18, -21, 
            -13, -20, -12, -27, -30, -25, -14, -32, 
            -49, -1, -27, -39, -46, -44, -30, -51, 
            -14, -14, -22, -46, -44, -30, -15, -27, 
            1, 3, -8, -64, -43, -16, 9, 8, 
            -11, 32, 8, -50, 4, -28, 24, 14, 
            },
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 
            174, 169, 154, 130, 143, 128, 161, 183, 
            90, 96, 81, 63, 52, 49, 78, 80, 
            28, 20, 9, 1, -2, 0, 13, 13, 
            13, 5, -3, -7, -7, -4, 0, -1, 
            4, 3, -2, 1, 0, -1, -1, -4, 
            13, 8, 8, 10, 13, 0, 2, -3, 
            0, 0, 0, 0, 0, 0, 0, 0, 
            },
        {-54, -34, -13, -24, -27, -23, -59, -95, 
            -21, -4, -21, -2, -5, -21, -24, -48, 
            -20, -20, 10, 9, -1, -5, -15, -37, 
            -13, 3, 22, 22, 22, 7, 8, -14, 
            -14, -2, 16, 21, 16, 13, 0, -14, 
            -19, 0, 0, 15, 10, 0, -16, -22, 
            -38, -16, -6, -1, 0, -16, -19, -40, 
            -25, -47, -19, -11, -19, -14, -50, -60, 
            },
        {-10, -18, -7, -4, -3, -5, -13, -20, 
            -4, -4, 3, -8, -3, -12, -4, -10, 
            2, -8, 0, -1, -2, 2, 0, 4, 
            0, 5, 8, 5, 10, 6, 0, 2, 
            -2, 0, 9, 15, 3, 6, -3, -5, 
            -8, 0, 4, 6, 9, 0, -7, -11, 
            -10, -14, -7, -1, 0, -5, -11, -23, 
            -19, -5, -19, -1, -5, -16, -1, -13, 
            },
        {13, 10, 18, 11, 12, 12, 8, 5, 
            11, 13, 9, 7, -1, 3, 8, 3, 
            7, 7, 7, 5, 4, 0, -1, 0, 
            4, 3, 13, 1, 2, 1, 0, 2, 
            3, 5, 4, 4, -1, -2, -4, -7, 
            0, 0, -1, 0, -3, -8, -8, -12, 
            -2, -2, 0, 0, -5, -9, -7, 0, 
            -5, 2, 3, -1, -1, -9, 4, -16, 
            },
        {-5, 22, 22, 27, 27, 19, 10, 20, 
            -13, 20, 28, 37, 54, 25, 30, 0, 
            -16, 6, 9, 45, 47, 35, 19, 9, 
            0, 22, 20, 45, 57, 40, 57, 36, 
            -14, 24, 15, 43, 31, 34, 39, 23, 
            -16, -27, 11, 2, 5, 17, 10, 5, 
            -18, -19, -30, -12, -12, -23, -32, -28, 
            -32, -28, -18, -43, -1, -28, -16, -37, 
            },
        {-70, -35, -18, -18, -7, 11, 0, -17, 
            -12, 13, 10, 13, 13, 34, 19, 7, 
            6, 13, 19, 11, 16, 41, 40, 9, 
            -8, 18, 20, 23, 22, 29, 22, 3, 
            -18, -4, 17, 20, 23, 19, 5, -7, 
            -19, -3, 7, 21, 19, 16, 3, -5, 
            -23, -7, 4, 13, 14, 4, -1, -13, 
            -49, -30, -17, -7, -25, -10, -24, -39, 
            },
    },
};


const int mirror_score[128] = {
	a1, b1, c1, d1, e1, f1, g1, h1,
	a2, b2, c2, d2, e2, f2, g2, h2,
	a3, b3, c3, d3, e3, f3, g3, h3,
	a4, b4, c4, d4, e4, f4, g4, h4,
	a5, b5, c5, d5, e5, f5, g5, h5,
	a6, b6, c6, d6, e6, f6, g6, h6,
	a7, b7, c7, d7, e7, f7, g7, h7,
	a8, b8, c8, d8, e8, f8, g8, h8
};

const int full_depth_moves = 4;
const int reduction_limit = 3;

U64 file_mask[64];
U64 rank_mask[64];
U64 isolated_mask[64];
U64 white_passed_mask[64];
U64 black_passed_mask[64];
U64 connected_mask[2][64];
U64 file_ahead_mask[64];
U64 file_behind_mask[64];

int get_rank[64] = {
    7, 7, 7, 7, 7, 7, 7, 7,
    6, 6, 6, 6, 6, 6, 6, 6,
    5, 5, 5, 5, 5, 5, 5, 5,
    4, 4, 4, 4, 4, 4, 4, 4,
    3, 3, 3, 3, 3, 3, 3, 3,
    2, 2, 2, 2, 2, 2, 2, 2,
    1, 1, 1, 1, 1, 1, 1, 1,
    0, 0, 0, 0, 0, 0, 0, 0
};

int square_color[64];
U64 light_squares = 0xaa55aa55aa55aa55ULL;

s_options engine_options[1];
char engine_name[] = "Shuffle";